{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mental Health Test</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="{% static 'css/tes.css' %}">
</head>
<body>
    <header>
        <img alt="Sejiwa Logo" src="{% static 'img/logosejiwa.png' %}"/>
        <nav>
            <a href="{% url 'home' %}">BERANDA</a>
            <a href="{% url 'about' %}">TENTANG</a>
            <a href="https://v20cw5h3mtt.typeform.com/to/Jdnw8buY">TES KESEHATAN MENTAL</a>
            <a href="{% url 'blog_list' %}">BLOG</a>
            <a class="btn btn-primary" href="#" data-bs-toggle="modal" data-bs-target="#loginForm">LOGIN</a>
        </nav>
    </header>
    
    <h1>Mental Health Self-Assessment</h1>
    <div class="form-container">
        <form id="mental-health-form">
            <br><br><br>
            <div class="form-group">
                <label>Bagaimana lingkungan keluarga Anda memengaruhi perasaan atau kesehatan mental Anda?</label>
                <select name="q1" required>
                    <option value="1">Dukungan keluarga positif, merasa diterima dan dimengerti</option>
                    <option value="2">Konflik atau ketegangan dalam keluarga</option>
                    <option value="3">Pola asuh yang terlalu menekan atau keras</option>
                    <option value="4">Tidak ada komunikasi yang baik di keluarga</option>
                    <option value="5">Lainnya</option>
                </select>
            </div>
            <div class="form-group">
                <label>Bagaimana lingkungan Sekolah / Kampus memengaruhi perasaan atau kesehatan mental Anda?</label>
                <select name="q2" required>
                    <option value="1">Merasa terbantu dengan dukungan akademik di sekolah</option>
                    <option value="2">Tekanan akademik yang tinggi atau tuntutan berprestasi</option>
                    <option value="3">Tekanan dari teman sebaya untuk bersosialisasi</option>
                    <option value="4">Mengalami perundungan atau bullying</option>
                    <option value="5">Lainnya</option>
                </select>
            </div>
            <div class="form-group">
                <label>Seberapa sering Anda merasa terpengaruh oleh teman sebaya?</label>
                <select name="q3" required>
                    <option value="1">Tidak Pernah</option>
                    <option value="2">Jarang</option>
                    <option value="3">Kadang-kadang</option>
                    <option value="4">Sering</option>
                    <option value="5">Sangat Sering</option>
                </select>
                <div class="form-group">
                <label>Apakah media sosial memengaruhi cara Anda melihat diri sendiri atau kehidupan Anda?</label>
                <select name="q4" required>
                    <option value="1">Tidak Memengaruhi</option>
                    <option value="2">Sedikit Memengaruhi</option>
                    <option value="3">Terkadang</option>
                    <option value="4">Memengaruhi</option>
                    <option value="5">Sangat Memengaruhi</option>
                </select>
            </div>
            <div class="form-group">
                <label>Apakah Anda sering merasa sulit untuk tenang ketika menghadapi masalah atau situasi yang menekan?</label>
                <select name="q5" required>
                    <option value="1">Tidak Pernah</option>
                    <option value="2">Jarang</option>
                    <option value="3">Kadang-kadang</option>
                    <option value="4">Sering</option>
                    <option value="5">Sangat Sering</option>
                </select>
            </div>
            <div class="form-group">
                <label>Apakah Anda merasa sedih atau tidak bersemangat melakukan hal- hal yang biasanya Anda nikmati?</label>
                <select name="q6" required>
                    <option value="1">Tidak Pernah</option>
                    <option value="2">Jarang</option>
                    <option value="3">Kadang-kadang</option>
                    <option value="4">Sering</option>
                    <option value="5">Sangat Sering</option>
                </select>
            </div>
            <div class="form-group">
                <label>Apakah Anda merasa gugup, cemas, atau khawatir tanpa alasan yang jelas?</label>
                <select name="q7" required>
                    <option value="1">Tidak Pernah</option>
                    <option value="2">Jarang</option>
                    <option value="3">Kadang-kadang</option>
                    <option value="4">Sering</option>
                    <option value="5">Sangat Sering</option>
                </select>
            </div>
            <div class="form-group">
                <label>Apakah Anda mengalami kesulitan tidur atau tidur terlalu lama dalam satu minggu terakhir?</label>
                <select name="q8" required>
                    <option value="1">Tidak Pernah</option>
                    <option value="2">Jarang</option>
                    <option value="3">Kadang-kadang</option>
                    <option value="4">Sering</option>
                    <option value="5">Sangat Sering</option>
                </select>
            </div>
            <div class="form-group">
                <label>Apakah Anda merasa kelelahan atau tidak memiliki energi untuk menjalani aktivitas sehari-hari?</label>
                <select name="q9" required>
                    <option value="1">Tidak Pernah</option>
                    <option value="2">Jarang</option>
                    <option value="3">Kadang-kadang</option>
                    <option value="4">Sering</option>
                    <option value="5">Sangat Sering</option>
                </select>
            </div>
            <div class="form-group">
                <label>Apakah Anda merasa sedih atau tidak bersemangat melakukan hal-hal yang biasanya Anda nikmati?</label>
                <select name="q10" required>
                    <option value="1">Tidak Pernah</option>
                    <option value="2">Jarang</option>
                    <option value="3">Kadang-kadang</option>
                    <option value="4">Sering</option>
                    <option value="5">Sangat Sering</option>
                </select>
            </div>
            <div class="form-group">
                <label>Apakah Anda merasa sulit berkonsentrasi atau fokus pada tugas yang Anda lakukan?</label>
                <select name="q11" required>
                    <option value="1">Tidak Pernah</option>
                    <option value="2">Jarang</option>
                    <option value="3">Kadang-kadang</option>
                    <option value="4">Sering</option>
                    <option value="5">Sangat Sering</option>
                </select>
            </div>
            <div class="form-group">
                <label>Apakah Anda merasa kurang percaya diri atau merasa tidak berharga?</label>
                <select name="q12" required>
                    <option value="1">Tidak Pernah</option>
                    <option value="2">Jarang</option>
                    <option value="3">Kadang-kadang</option>
                    <option value="4">Sering</option>
                    <option value="5">Sangat Sering</option>
                </select>
            </div>
            <div class="form-group">
                <label>Apakah Anda merasa tegang atau sering mengalami sakit kepala, sakit perut, atau ketegangan otot?</label>
                <select name="q13" required>
                    <option value="1">Tidak Pernah</option>
                    <option value="2">Jarang</option>
                    <option value="3">Kadang-kadang</option>
                    <option value="4">Sering</option>
                    <option value="5">Sangat Sering</option>
                </select>
            </div>
            <div class="form-group">
                <label>Seberapa sering Anda merasa kewalahan dengan semua hal yang harus Anda lakukan atau situasi yang sedang dihadapi??</label>
                <select name="q14" required>
                    <option value="1">Tidak Pernah</option>
                    <option value="2">Jarang</option>
                    <option value="3">Kadang-kadang</option>
                    <option value="4">Sering</option>
                    <option value="5">Sangat Sering</option>
                </select>
            </div>
            <div class="form-group">
                <label>Seberapa sering Anda merasa cemas atau khawatir tanpa alasan yang jelas??</label>
                <select name="q15" required>
                    <option value="1">Tidak Pernah</option>
                    <option value="2">Jarang</option>
                    <option value="3">Kadang-kadang</option>
                    <option value="4">Sering</option>
                    <option value="5">Sangat Sering</option>
                </select>
            </div>
            <div class="form-group">
                <label>Bagaimana Anda merasa tentang kemampuan Anda untuk mengatasi tantangan sehari-hari??</label>
                <select name="q16" required>
                    <option value="1">Tidak Pernah</option>
                    <option value="2">Jarang</option>
                    <option value="3">Kadang-kadang</option>
                    <option value="4">Sering</option>
                    <option value="5">Sangat Sering</option>
                </select>
            </div>
            <div class="form-group">
                <label>Apakah Anda sering merasa kelelahan meskipun tidak melakukan aktivitas fisik yang berat??</label>
                <select name="q17" required>
                    <option value="1">Tidak Pernah</option>
                    <option value="2">Jarang</option>
                    <option value="3">Kadang-kadang</option>
                    <option value="4">Sering</option>
                    <option value="5">Sangat Sering</option>
                </select>
            </div>
            <div class="form-group">
                <label>Seberapa sering Anda merasa sulit berkonsentrasi atau menyelesaikan tugas??</label>
                <select name="q18" required>
                    <option value="1">Tidak Pernah</option>
                    <option value="2">Jarang</option>
                    <option value="3">Kadang-kadang</option>
                    <option value="4">Sering</option>
                    <option value="5">Sangat Sering</option>
                </select>
            </div>
            <div class="form-group">
                <label>Bagaimana Anda merasa tentang dukungan sosial yang Anda dapatkan dari keluarga, teman, atau lingkungan??</label>
                <select name="q19" required>
                    <option value="1">Tidak Pernah</option>
                    <option value="2">Jarang</option>
                    <option value="3">Kadang-kadang</option>
                    <option value="4">Sering</option>
                    <option value="5">Sangat Sering</option>
                </select>
            </div>
            <div class="form-group">
                <label>Apakah Anda pernah memiliki pikiran untuk melukai diri sendiri atau merasa putus asa???</label>
                <select name="q20" required>
                    <option value="5">Ya</option>
                    <option value="1">Tidak</option>
                </select>
            </div>
            </div>
            <button type="submit">Submit</button>
        </form>
    </div>

    <!-- Login Form Modal -->
<div class="modal fade" id="loginForm" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="max-width: 900px;">
      <div class="modal-content">
        <!-- Left Section -->
        <div class="left" style="background-color: #FFDADA; width: 50%; padding: 20px; display: flex; flex-direction: column; align-items: center; justify-content: center;">
          <img src="{% static 'img/logosejiwa.png' %}" alt="Logo" height="200" width="350"/>
          <div class="quote" style="text-align: center; margin-top: 20px;">
            <h2 style="color: #7D8CC4; font-size: 24px; margin: 0;">Quote of the Day</h2>
            <p style="color: #4A4A4A; font-size: 24px; font-weight: bold; margin: 10px 0 0 0;">"What happens is not as important as how you react to what happens"</p>
          </div>
        </div>
  
        <!-- Right Section -->
        <div class="right" style="background-color: #FFFFFF; width: 50%; padding: 20px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative;">
          <div class="background-pattern" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-image: url('https://placehold.co/100x100?text=Pattern'); background-repeat: no-repeat; background-position: center; opacity: 0.1;"></div>
          <div class="content" style="position: relative; z-index: 1; text-align: center;">
            <h1 style="color: #4A4A4A; font-size: 24px; font-weight: bold;">HALO SOBAT JIWA</h1>
            <p style="color: #4A4A4A; font-size: 14px;">Belum punya akun? <a href="#" onclick="showRegisterForm()" style="color: #7D8CC4;" data-bs-target="#registerForm">Daftar disini</a></p>
  
            <!-- Email Input -->
            <div class="form-group" style="margin: 20px 0; width: 95%; position: relative;">
              <div class="input-icon" style="position: relative;">
                <i class="fas fa-envelope" style="position: absolute; margin-left: 10px; margin-top: 18px; color: #C8E6C9;"></i>
                <input type="email" placeholder="Email" style="width: 100%; padding: 15px; border: 2px solid #C8E6C9; border-radius: 5px; font-size: 14px; padding-left: 40px;"/>
              </div>
            </div>
  
            <!-- Password Input -->
            <div class="form-group" style="margin: 20px 0; width: 95%; position: relative;">
              <div class="input-icon" style="position: relative;">
                <i class="fas fa-lock" style="position: absolute; margin-left: 10px; margin-top: 18px; color: #C8E6C9;"></i>
                <input type="password" placeholder="Password" style="width: 100%; padding: 15px; border: 2px solid #C8E6C9; border-radius: 5px; font-size: 14px; padding-left: 40px;"/>
              </div>
            </div>
  
            <!-- Login Button -->
            <button class="login-btn" style="background-color: #7D8CC4; color: #FFFFFF; border: none; padding: 10px 40px; border-radius: 5px; font-size: 16px; cursor: pointer;">Login</button>
  
            <!-- Forgot Password Link -->
            <p><a href="#" class="forgot-password" style="color: #7D8CC4; font-size: 14px; text-decoration: none;">Lupa password?</a></p>
          </div>
        </div>
  
      </div>
    </div>
  </div>
  
  <!-- Register Form Modal -->
  <div class="modal fade" id="registerForm" tabindex="-1" aria-labelledby="registerModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="max-width: 900px;">
      <div class="modal-content">
  
        <!-- Left Section -->
        <div class="left" style="background-color: #FFDADA; width: 50%; padding: 20px; display: flex; flex-direction: column; align-items: center; justify-content: center;">
          <img src="{% static 'img/logosejiwa.png' %}" alt="Logo" height="200" width="350"/>
          <div class="quote" style="text-align: center; margin-top: 20px;">
            <h2 style="color: #7D8CC4; font-size: 24px; margin: 0;">Quote of the Day</h2>
            <p style="color: #4A4A4A; font-size: 24px; font-weight: bold; margin: 10px 0 0 0;">"What happens is not as important as how you react to what happens"</p>
          </div>
        </div>
  
        <!-- Right Section -->
        <div class="right" style="background-color: #FFFFFF; width: 50%; padding: 20px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative;">
          <div class="background-pattern" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-image: url('https://placehold.co/100x100?text=Pattern'); background-repeat: no-repeat; background-position: center; opacity: 0.1;"></div>
          <div class="content" style="position: relative; z-index: 1; text-align: center;">
            <h1 style="color: #4A4A4A; font-size: 24px; font-weight: bold;">HALO SOBAT JIWA</h1>
            <p style="color: #4A4A4A; font-size: 14px;">Sudah punya akun? <a href="#" onclick="showLoginForm()" style="color: #7D8CC4;" data-bs-target="#loginForm">Login disini</a></p>
  
            <!-- Username Input -->
            <div class="form-group" style="margin: 20px 0; width: 95%; position: relative;">
              <div class="input-icon" style="position: relative;">
                <i class="fas fa-user" style="position: absolute; margin-left: 10px; margin-top: 18px; color: #C8E6C9;"></i>
                <input type="text" placeholder="Username" style="width: 100%; padding: 15px; border: 2px solid #C8E6C9; border-radius: 5px; font-size: 14px; padding-left: 40px;"/>
              </div>
            </div>
  
            <!-- Email Input -->
            <div class="form-group" style="margin: 20px 0; width: 95%; position: relative;">
              <div class="input-icon" style="position: relative;">
                <i class="fas fa-envelope" style="position: absolute; margin-left: 10px; margin-top: 18px; color: #C8E6C9;"></i>
                <input type="email" placeholder="Email" style="width: 100%; padding: 15px; border: 2px solid #C8E6C9; border-radius: 5px; font-size: 14px; padding-left: 40px;"/>
              </div>
            </div>
  
            <!-- Password Input -->
            <div class="form-group" style="margin: 20px 0; width: 95%; position: relative;">
              <div class="input-icon" style="position: relative;">
                <i class="fas fa-lock" style="position: absolute; margin-left: 10px; margin-top: 18px; color: #C8E6C9;"></i>
                <input type="password" placeholder="Password" style="width: 100%; padding: 15px; border: 2px solid #C8E6C9; border-radius: 5px; font-size: 14px; padding-left: 40px;"/>
              </div>
            </div>
  
            <!-- Checkbox Agreement -->
            <div class="checkbox-group" style="margin: 20px 0; text-align: left; width: 100%;">
              <input type="checkbox" id="terms" style="margin-right: 10px;"/>
              <label for="terms" style="font-size: 14px;">Saya telah membaca, memahami, dan menyetujui <a href="#">Syarat dan Ketentuan</a> serta <a href="#">Kebijakan Privasi</a></label>
            </div>
  
            <!-- Register Button -->
            <button class="register-btn" style="background-color: #7D8CC4; color: #FFFFFF; border: none; padding: 10px 40px; border-radius: 5px; font-size: 16px; cursor: pointer;">Daftar</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  

    <script>
        document.getElementById('mental-health-form').addEventListener('submit', function (e) {
            e.preventDefault(); 
            Swal.fire({
                icon: 'success',
                title: 'Terima Kasih atas Kejujuran Anda!',
                text: 'Jawaban Anda sangat penting. Ingatlah bahwa Anda tidak sendiri, dan selalu ada bantuan jika Anda membutuhkannya. Tetap semangat dan jaga kesehatan mental Anda!',
                confirmButtonText: 'OK'
            });
        });
    </script>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
      <script>
        function showRegisterForm() {
          var loginModal = new bootstrap.Modal(document.getElementById('loginForm'));
          loginModal.hide();  // Close Login Modal
    
          // Menunggu sampai login modal benar-benar tertutup, baru buka register modal
          loginModal._isShown = false;  // Set login modal state to closed
          var registerModal = new bootstrap.Modal(document.getElementById('registerForm'));
          registerModal.show(); // Show Register Modal
        }
    
        // Function to show Login Form and hide Register Form
        function showLoginForm() {
          var registerModal = new bootstrap.Modal(document.getElementById('registerForm'));
          registerModal.hide(); // Close Register Modal
    
          // Menunggu sampai register modal benar-benar tertutup, baru buka login modal
          registerModal._isShown = false;  // Set register modal state to closed
          var loginModal = new bootstrap.Modal(document.getElementById('loginForm'));
          loginModal.show(); // Show Login Modal
        }
      </script>

    <!-- INI BUAT NENTUIN POIN KONSULTASI -->
    <script>
        document.getElementById("mental-health-form").addEventListener("submit", function(event) {
            event.preventDefault(); // Mencegah reload halaman saat formulir dikirim
    
            // Ambil semua jawaban dari formulir
            const formData = new FormData(event.target);
            let totalScore = 0;
    
            // Hitung total skor dari setiap jawaban
            formData.forEach((value) => {
                totalScore += parseInt(value);
            });
    
            // Logika penentuan konsultasi
            if (totalScore > 75) {
                Swal.fire({
                    icon: 'info',
                    title: 'Hasil Tes Anda',
                    text: `Total skor Anda: ${totalScore}. Anda disarankan untuk segera melakukan konsultasi dengan ahli kesehatan mental.`,
                    confirmButtonText: 'OK'
                });
            } else if (totalScore >= 50 && totalScore <= 75) {
                Swal.fire({
                    icon: 'question',
                    title: 'Hasil Tes Anda',
                    text: `Total skor Anda: ${totalScore}. Apakah Anda ingin berkonsultasi dengan ahli kesehatan mental?`,
                    showCancelButton: true,
                    confirmButtonText: 'Ya, Konsultasi',
                    cancelButtonText: 'Tidak, Terima Kasih'
                }).then((result) => {
                    if (result.isConfirmed) {
                        // Arahkan ke WhatsApp
                        window.location.href = 'https://wa.me/628567470166';
                    }
                });
            } else {
                Swal.fire({
                    icon: 'success',
                    title: 'Hasil Tes Anda',
                    text: `Total skor Anda: ${totalScore}. Anda tidak memerlukan konsultasi saat ini.`,
                    confirmButtonText: 'OK'
                });
            }
        });
    </script>
    
</body>
</html>